<div>
  <div>
    <h1>Lista de Pets</h1>
  </div>

  @if (loading()) {
    <div>Carregando...</div>
  }

  @if (errorMessage()) {
    <div>{{ errorMessage() }}</div>
  }

  @if (!loading() && pets().length === 0) {
    <div>
      <p>Nenhum pet encontrado.</p>
    </div>
  }

  @if (!loading() && pets().length > 0) {
    <div>
      @for (pet of pets(); track pet.id) {
        <div>
          @if (pet.foto?.url) {
            <img [src]="pet.foto?.url" [alt]="pet.nome">
          } @else {
            <div>Sem foto</div>
          }
          
          <div>
            <h3>{{ pet.nome }}</h3>
            <p><strong>Raça:</strong> {{ pet.raca }}</p>
            <p><strong>Idade:</strong> {{ pet.idade }} anos</p>
            @if (pet.tutores && pet.tutores.length > 0) {
              <p><strong>Tutor:</strong> {{ pet.tutores[0].nome }}</p>
            }
          </div>

          <div>
            <button (click)="viewDetails(pet.id)">Ver</button>
          </div>
        </div>
      }
    </div>

    @if (totalPages() > 1) {
      <div>
        <button 
          (click)="changePage(currentPage() - 1)" 
          [disabled]="currentPage() === 1">
          Anterior
        </button>
        
        <span>Página {{ currentPage() }} de {{ totalPages() }}</span>
        
        <button 
          (click)="changePage(currentPage() + 1)" 
          [disabled]="currentPage() === totalPages()">
          Próxima
        </button>
      </div>
    }
  }
</div>
