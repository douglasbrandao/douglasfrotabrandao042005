<div class="min-h-screen px-4 sm:px-6 lg:px-8 pb-8 sm:pb-10">
  <div class="max-w-6xl mx-auto">
    <h2 class="text-2xl sm:text-3xl font-bold text-[var(--color-secondary)] mt-4 sm:mt-6 mb-4">Pets</h2>

    <div class="flex flex-col sm:flex-row sm:items-center gap-3 sm:gap-4 mb-6 sm:mb-8">
      <div class="w-full sm:max-w-sm">
        <input
          type="text"
          class="input-base w-full"
          placeholder="Buscar por nome do pet..."
          [value]="searchName()"
          debounce
          [debounceTime]="600"
          (debounced)="onSearchNameChange($event)"
        />
      </div>
    </div>

    @if (loading()) {
      <div class="flex justify-center items-center py-12 sm:py-16 text-base sm:text-lg text-[var(--color-secondary)]">Carregando...</div>
    }

    @if (errorMessage()) {
      <div class="alert-error">{{ errorMessage() }}</div>
    }

    @if (!loading() && pets().length === 0) {
      <div class="text-center text-[var(--color-secondary)]/80 py-12 sm:py-16 text-sm sm:text-base">Nenhum pet encontrado.</div>
    }

    @if (!loading() && pets().length > 0) {
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-5 lg:gap-6">
        @for (pet of pets(); track pet.id) {
          <article class="card-base flex flex-col lg:flex-row lg:items-center gap-3 sm:gap-4 p-4 sm:p-6 w-full min-w-0">
            <div class="flex-shrink-0 flex justify-center lg:justify-start">
              <app-avatar [src]="pet.foto?.url ?? null" [alt]="pet.nome || ''" size="md">Sem foto</app-avatar>
            </div>
            <div class="flex-1 min-w-0 text-center lg:text-left">
              <h3 class="text-lg sm:text-xl font-bold text-[var(--color-secondary)] truncate capitalize" [title]="pet.nome || 'Sem nome'">{{ pet.nome || 'Sem nome' }}</h3>
              <p class="text-[var(--color-secondary)]/80 text-sm sm:text-base truncate capitalize" [title]="pet.raca || 'Sem raça'"><span class="font-semibold">Raça:</span> {{ pet.raca || 'Sem raça' }}</p>
              <p class="text-[var(--color-secondary)]/80 text-sm sm:text-base capitalize"><span class="font-semibold">Idade:</span> {{ pet.idade != null ? (pet.idade + ' anos') : 'Sem idade' }}</p>
            </div>
            <div class="flex-shrink-0 w-full lg:w-auto flex justify-center lg:justify-end">
              <button (click)="viewDetails(pet.id)" class="btn-primary w-full lg:w-auto min-h-[44px] lg:min-h-0 px-6">Ver Pet</button>
            </div>
          </article>
        }
      </div>

      @if (pagination.totalPages() > 1) {
        <div class="flex flex-wrap justify-center items-center gap-3 sm:gap-4 mt-8 sm:mt-10 mb-8 sm:mb-16">
          <app-pagination
            [currentPage]="pagination.currentPage()"
            [totalPages]="pagination.totalPages()"
            (pageChange)="changePage($event)">
          </app-pagination>
        </div>
      }
    }
  </div>
</div>
